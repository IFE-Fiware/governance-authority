appConfig:
  spring:
    cloud:
      gateway:
        routes:
          - id: sap
            uri: ${sap.url}
            predicates:
              - Path=/sapApi/v1/mtls/**
            filters:
              - StripPrefix=1
          - id: identity-provider
            uri: ${identity-provider.url}
            predicates:
              - Path=/identityApi/v1/mtls/**
            filters:
              - StripPrefix=1
          - id: authentication-provider
            uri: ${authentication-provider.url}
            predicates:
              - Path=/authApi/v1/mtls/**
            filters:
              - StripPrefix=1
          - id: fc-service
            uri: "http://xsfc-service:8081"
            predicates:
            - Path=/fc/**
            filters:
            - StripPrefix=1
          - id: adapter-service
            uri: "http://adapter-service:8084"
            predicates:
            - Path=/adapter/**
            filters:
            - StripPrefix=1


  routes:
    public-urls:
      - method: GET
        path: "/actuator/**"

    abac:
      - method: GET
        path: "/identityApi/v1/mtls/whoami"
        disable-ephemeral-proof-check: true 
      - method: PATCH
        path: "/identityApi/v1/mtls/publicKey"
        disable-ephemeral-proof-check: true
      - method: POST
        path: "/identityApi/v1/mtls/token"
        disable-ephemeral-proof-check: true
      - method: POST
        path: "/authApi/v1/mtls/ephemeralProof"
        disable-ephemeral-proof-check: true
      - method: GET
        path: "/sapApi/v1/mtls/identityAttributes"
        disable-ephemeral-proof-check: true

      - method: GET
        path: "/fc/**"
        disable-ephemeral-proof-check: true
      - method: POST
        path: "/fc/**"
        disable-ephemeral-proof-check: true
      - method: PUT
        path: "/fc/**"
        disable-ephemeral-proof-check: true
      - method: DELETE
        path: "/fc/**"
        disable-ephemeral-proof-check: true
      - method: POST
        path: "/adapter/**"
        disable-ephemeral-proof-check: true
      - method: GET
        path: "/adapter/**"
        disable-ephemeral-proof-check: true

    logging:
      business:
        - method: GET
          path: /authApi/v1/mtls/ping
          config:
            operations:
              - PING_REQUEST
        - method: GET
          path: /identityApi/v1/mtls/echo
          config:
            operations:
              - ECHO_REQUEST
        - config:
            operations:
            - PUBLISH_CATALOG
          method: POST
          path: /fc/self-descriptions/*
        - config:
            operations:
            - PUBLISH_CATALOG
          method: POST
          path: /fc/self-descriptions
        - config:
            operations:
            - SEARCH_CATALOG
          method: POST
          path: /adapter/api/v1/search/*